@page
@model EasyLearn.Pages.TrainingModules.CreateModel

<style>
    body {
        background-color: #0A082D;
        color: white;
    }

    .create-title {
        text-align: center;
        font-size: 2em;
        color: white;
    }

    .control-label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }

    .form-control {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    .text-danger {
        color: red;
        font-size: 0.9em;
    }

    #cards-container {
        border-radius: 10px;
        margin-top: 120px; /* Відстань між контейнером і верхніми елементами */
    }

    .card-box {
        padding: 45px;
        border-radius: 8px;
        background-color: #2E3756; /* Колір фону для картки */
        margin-bottom: 15px; /* Відстань між картками */
        display: flex; /* Вирівнюємо картки горизонтально */
        justify-content: space-between; /* Відстань між полями */
    }

    .form-group {
        width: 48%; /* Ширина полів */
        margin-right: 20px; /* Відступ справа */
    }

        .form-group:last-child {
            margin-right: 0; /* Прибираємо відступ у останнього елемента */
        }

    .shire {
        width: 100%; /* 100% від батька */
        background-color: transparent;
        border: none;
        border-bottom: 4px solid white;
        color: white;
        border-radius: 0;
        padding: 8px;
        position: relative;
        top: -70px; /* Ваше позиціонування */
    }

        .shire:focus {
            background-color: #2E3756;
            border-bottom: 5px solid yellow;
            outline: none;
            box-shadow: none;
            color: white;
        }

    #add-card {
        background-color: #2E3756;
        color: white;
        width: 100%;
        height: 140px;
        border: none;
        font-weight: bold;
        font-size: 16px;
        border-bottom: 5px solid aquamarine;
        cursor: pointer;
        border-radius: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 26px;
    }

        #add-card:hover {
            background-color: #3E4A68;
        }

    .create-module-button {
        background-color: #007BFF;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        position:relative;
        left:0%;
        top:-100px;
    }

        .create-module-button:hover {
            background-color: #0056b3;
        }
        .card-number {
            margin-left:-20px;
        margin-top: -32px;
        font-weight:bold;
    }


</style>

<div class="top-page-library-modules">
<h2 class="create-title">Створити модуль із картками</h2>

<form method="post">
    <div class="form-group">
        <label asp-for="Name" class="control-label"></label>
        <input asp-for="Name" class="form-control" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Description" class="control-label"></label>
        <input asp-for="Description" class="form-control" />
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>

    <lable class="counter">1</lable>
        <hr style="height:5px; width:100%; opacity:1; background-color:#0A082D; position:relative; top:170px;" />
    <div id="cards-container">
            <div class="card-box">
                <div class="form-group">
                    <label class="gg">Term</label>
                    <input type="text" name="Cards[${cardIndex}].Term" class="form-control shire" />
                </div>
                <div class="form-group">
                    <label class="gg">Definition</label>
                    <input type="text" name="Cards[${cardIndex}].Definition" class="form-control shire" />
                </div>
            </div>
    </div>

    <button type="button" class="btn btn-secondary" id="add-card">+ ДОДАТИ КАРТКУ</button>

    <div class="form-group mt-3">
        <input type="submit" value="Create" class="btn btn-primary create-module-button " />
    </div>
</form>
</div>
@section Scripts {
    <script>
        let cardIndex = 1;

        document.getElementById('add-card').addEventListener('click', function () {
            let container = document.getElementById('cards-container');

            // Отримуємо останню картку
            let lastCard = container.querySelector(`.card-box:last-child`);

            // Перевіряємо, чи існує картка і чи її поля заповнені
            if (lastCard) {
                let lastTerm = lastCard.querySelector('input[name^="Cards"][name$=".Term"]').value;
                let lastDefinition = lastCard.querySelector('input[name^="Cards"][name$=".Definition"]').value;

                if (lastTerm.trim() === "" || lastDefinition.trim() === "") {
                    alert('Будь ласка, заповніть термін та визначення перед додаванням нової картки.');/* ${ cardIndex + 1 } */
                    return;
                }
            }

            // Якщо всі поля заповнені, додаємо нову картку
            let cardHtml = `
            <hr style="height:5px; width:100%; opacity:1; background-color:#0A082D; position:relative; top:65px;" />
            <div class="card-box">
                <div class="card-number" style="">${cardIndex + 1}</div>

                <div class="form-group">
                            <label  >Term</label>
                            <input type="text" name="Cards[${cardIndex}].Term" class="form-control shire" />
                </div>
                <div class="form-group">
                    <label class="gg">Definition</label>
                    <input type="text" name="Cards[${cardIndex}].Definition" class="form-control shire" />
                </div>
            </div>`;



            container.insertAdjacentHTML('beforeend', cardHtml);
            cardIndex++;
        });
    </script>

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
